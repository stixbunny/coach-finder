import{_ as L,k as q,u as F,r as o,c as B,b as c,o as y,d as S,f as s,w as l,e,t as m,q as b,v as C,m as P,g as x,y as R,p as T,j}from"./index-b0658763.js";const U=r=>(T("data-v-8ae135e7"),r=r(),j(),r),$=["onSubmit"],z={class:"form-control"},G=U(()=>e("label",{for:"email"},"E-mail",-1)),H={class:"form-control"},J=U(()=>e("label",{for:"password"},"Password",-1)),K={key:0},O={__name:"UserAuth",setup(r){const f=q(),g=F(),V=g.currentRoute.value.query.redirect||"coaches",n=o(""),u=o(""),d=o(!0),t=o("login"),p=o(!1),i=o(null);async function A(){if(d.value=!0,n.value===""||!/^[^@]+@\w+(\.\w+)+\w$/.test(n.value)||u.value.length<6){d.value=!1;return}p.value=!0;const _={email:n.value,password:u.value};try{t.value==="login"?await f.signIn(_):await f.signUp(_),g.replace({name:V})}catch(a){console.log("error!"),i.value=a.message||"Failed to authenticate, please try agin later."}p.value=!1}function I(){t.value==="login"?t.value="signup":t.value="login"}function k(){i.value=null}const D=B(()=>t.value==="login"?"Login":"Signup"),M=B(()=>t.value==="login"?"Signup instead":"Login instead");return(_,a)=>{const h=c("BaseDialog"),N=c("BaseSpinner"),w=c("BaseButton"),E=c("BaseCard");return y(),S("div",null,[s(h,{show:!!i.value,title:"An error ocurred",onClose:k},{default:l(()=>[e("p",null,m(i.value),1)]),_:1},8,["show"]),s(h,{show:p.value,title:"Authenticating...",fixed:""},{default:l(()=>[s(N)]),_:1},8,["show"]),s(E,null,{default:l(()=>[e("form",{onSubmit:R(A,["prevent"])},[e("div",z,[G,b(e("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=v=>n.value=v)},null,512),[[C,n.value,void 0,{trim:!0}]])]),e("div",H,[J,b(e("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=v=>u.value=v)},null,512),[[C,u.value,void 0,{trim:!0}]])]),d.value?P("",!0):(y(),S("p",K," Please enter a valid email and password (must be at least 6 characters long) ")),s(w,null,{default:l(()=>[x(m(D.value),1)]),_:1}),s(w,{type:"button",mode:"flat",onClick:I},{default:l(()=>[x(m(M.value),1)]),_:1})],40,$)]),_:1})])}}},W=L(O,[["__scopeId","data-v-8ae135e7"]]);export{W as default};
